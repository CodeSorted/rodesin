<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Design Upload Portal</title>
  <style>
    :root {
      --color-base: #ebdfd7;
      --color-light: #f5f1ee;
      --color-lighter: #fbf9fa;
      --color-dark: #a89f97;
      --color-darker: #7a6e68;
      --color-shadow: rgba(168, 142, 130, 0.8);
      --color-shadow-light: rgba(168, 142, 130, 0.3);
      --color-border: #b8a99a;
      --color-bg-gradient-start: #f0ebe7;
      --color-bg-gradient-end: #d9d2ca;
      --color-text-primary: #3a2f2a;
      --color-text-secondary: #5a4f4a;
      --color-btn-delete-start: #7a5a4a;
      --color-btn-delete-end: #6a4a3a;
      --color-back-btn-bg: rgba(168, 142, 130, 0.15);
      --color-back-btn-border: #b8a99a;
      --color-back-btn-text: #5a4f4a;
      --color-modal-overlay: rgba(168, 142, 130, 0.15);
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    a {
        text-decoration: none;
        color: black;
    }

    body {
        font-family: 'Inter', sans-serif;
        font-size: 16px;
        line-height: 1.5;
        padding-top: 125px;
        background-color: #ebdfd7;
    }

    /* Header Styles */
    .header {
        background: linear-gradient(90deg, #000000 0%, #3d1314 100%);
        height: 80px;
        width: 100%;
        border: 1px solid #000000;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0px 20px;

        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
    }

    .logo {
        width: 150px;
        height: 60px;
        margin-left: 17px;
        margin-top: 2px;
    }

    .search-bar {
        width: 500px;
        height: 55px;
        background-color: #ffffff;
        border: 4px solid #964f4f;
        border-radius: 32px;
        display: flex;
        align-items: center;
        padding: 0 20px;
    }

    .search-bar input {
        flex: 1;
        border: none;
        outline: none;
        font-size: 16px;
        color: black;
        background: transparent;
    }

    .search-icon {
        width: 20px;
        height: 20px;
    }

    .user-cart {
        display: flex;
        align-items: center;
    }

    .user-icon,
    .cart-icon {
        width: 25px;
        height: 25px;
        cursor: pointer;
    }

    .user-icon {
        margin-right: 10px;
    }

    .user-btn {
        display: flex;
        align-items: flex-end;
        background-color: #964f4f;
        color: #ffffff;
        border: none;
        border-radius: 20px;
        padding: 10px;
        font-family: 'Inter', sans-serif;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        height: 40px;
        width: 100%;
        margin-right: 20px;
        transition: background-color 0.3s ease;
    }

    .user-btn:hover {
        background-color: #b36b6b;
    }

    /* Navigation Styles */
    .nav-bar {
        background: linear-gradient(90deg, #dcdcdc 0%, #a6a6a6 100%);
        height: 45px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;

        position: fixed;
        top: 80px;
        left: 0;
        z-index: 999;
    }

    .nav-links {
        display: flex;
        gap: 40px;
    }

    .nav-link {
        font-size: 15px;
        font-weight: 400;
        color: #000000;
        text-decoration: none;
        padding: 8px 10px;
    }

    .nav-link.active {
        background-color: #f5f5f5;
        border-radius: 8px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: var(--color-base);
      color: var(--color-text-primary);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      max-width: 1200px;
      width: 100%;
      margin-top: 10%;
    }

    /* Adjust form and preview section width to be smaller */
    .form-section {
      max-width: 350px;
      flex: 1 1 0;
    }

    .preview-section {
      max-width: 350px;
      flex: 1 1 0;
    }
    .form-part {
      flex: 1 1 0;
    }

    /* Back button style same as explore page */
    .back-button {
        position: fixed;
        top: 135px;
        right: 80px;
        background-color: #2c2c2c;
        color: #f5f5f5;
        border: 1px solid #2c2c2c;
        border-radius: 8px;
        width: 125px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
    }

    .back-button img {
        width: 10px;
        height: 10px;
        margin-right: 8px;
    }

    .back-button span {
        font-size: 15px;
        font-weight: 400;
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
        margin: 20px;
      }
    }

    .form-section, .preview-section {
      background: linear-gradient(145deg, var(--color-bg-gradient-start), var(--color-bg-gradient-end));
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 10px var(--color-shadow);
      color: var(--color-text-primary);
      transition: transform 0.3s ease;
    }

    .form-section:hover, .preview-section:hover {
      transform: translateY(-8px);
      box-shadow: 0 0 15px var(--color-shadow);
    }

    h2 {
      margin-bottom: 24px;
      color: var(--color-darker);
      font-weight: 700;
      text-align: center;
      text-shadow: 0 0 5px var(--color-shadow-light);
    }

    input, select, textarea {
      width: 100%;
      padding: 14px 16px;
      margin-top: 12px;
      border: 2px solid var(--color-border);
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      background-color: var(--color-lighter);
      color: var(--color-text-primary);
      box-shadow: inset 0 0 8px var(--color-shadow-light);
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--color-dark);
      box-shadow: 0 0 8px var(--color-shadow);
      background-color: var(--color-light);
    }

    .label {
      font-weight: 700;
      margin-top: 26px;
      display: block;
      color: var(--color-darker);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .file-upload-box {
      margin-top: 14px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px;
      border: 3px dashed var(--color-border);
      border-radius: 20px;
      background-size: cover;
      background-position: center;
      box-shadow: 0 0 15px var(--color-shadow-light) inset;
      transition: background 0.4s ease, transform 0.3s ease, border-color 0.3s ease;
      text-align: center;
    }

    .file-upload-box:hover {
      background-color: var(--color-light);
      transform: scale(1.05);
      border-color: var(--color-dark);
      box-shadow: 0 0 30px var(--color-shadow) inset;
    }

    .upload-icon {
      font-size: 64px;
      margin-bottom: 12px;
      text-shadow: 0 0 6px var(--color-darker);
    }

    .file-upload-box span {
      font-size: 18px;
      font-weight: 700;
      color: var(--color-darker);
      text-shadow: 0 0 5px var(--color-shadow-light);
    }

    .preview-box {
      background: linear-gradient(145deg, var(--color-bg-gradient-end), var(--color-bg-gradient-start));
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 10px var(--color-shadow-light);
      color: var(--color-darker);
      min-height: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .preview-box h3 {
      font-size: 28px;
      margin-bottom: 16px;
      color: var(--color-darker);
      font-weight: 800;
      text-shadow: 0 0 8px var(--color-shadow-light);
    }

    .preview-texts {
      width: 100%;
      max-width: 420px;
      font-size: 18px;
      font-weight: 600;
      color: var(--color-darker);
    }

    .preview-texts p {
      margin: 8px 0;
    }

    .preview-img {
      width: 100%;
      max-width: 420px;
      height: auto;
      margin-top: 20px;
      border-radius: 16px;
      border: 2px solid var(--color-border);
      display: none;
      box-shadow: 0 0 20px var(--color-shadow-light);
      transition: all 0.4s ease;
      object-fit: contain;
      max-height: 300px;
    }

    .submit-btn {
      margin-top: 20px;
      width: 48%;
      background: var(--color-darker);
      color: var(--color-text-primary);
      border: none;
      padding: 10px 0;
      font-size: 14px;
      font-weight: 700;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 0 10px var(--color-shadow);
      transition: background 0.3s ease, box-shadow 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      display: inline-block;
      text-align: center;
    }

    .submit-btn:hover {
      background: var(--color-base);
      box-shadow: 0 0 15px var(--color-shadow);
    }

    /* Back Button */
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: var(--color-back-btn-bg);
      border: 2px solid var(--color-back-btn-border);
      color: var(--color-back-btn-text);
      padding: 10px 18px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      backdrop-filter: blur(8px);
      transition: background 0.3s ease, transform 0.3s ease;
      z-index: 10001;
    }

    .back-btn:hover {
      background: rgba(168, 142, 130, 0.3);
      transform: scale(1.05);
    }

    /* Modal and saved designs - Updated to match theme */
    #savedDesignsModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: var(--color-modal-overlay);
      z-index: 9999;
      overflow-y: auto;
      padding: 60px 20px;
    }

    #savedGallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 24px;
    }

    .saved-card {
      background: linear-gradient(145deg, var(--color-bg-gradient-start), var(--color-bg-gradient-end));
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 10px var(--color-shadow);
      color: var(--color-base);
      text-align: center;
      transition: transform 0.3s ease;
    }

    .saved-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 15px var(--color-shadow);
    }

    .saved-card h3 {
      color: var(--color-base);
      font-weight: 700;
      margin-bottom: 10px;
    }

    .saved-card p {
      margin: 8px 0;
      font-weight: 600;
      color: var(--color-base);
    }

    .saved-card img {
      width: 100%;
      max-height: 180px;
      object-fit: contain;
      border-radius: 12px;
      border: 2px solid var(--color-base);
      box-shadow: 0 4px 12px rgba(235, 223, 215, 0.53);
      margin-bottom: 12px;
    }

    .delete-btn {
      background: linear-gradient(135deg, var(--color-btn-delete-start), var(--color-btn-delete-end));
      color: #fff;
      padding: 8px 16px;
      margin-top: 12px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(168, 122, 111, 0.5);
      transition: all 0.3s ease;
    }

    .delete-btn:hover {
      background: linear-gradient(135deg, #b07f74, #9a6b62);
      box-shadow: 0 6px 16px rgba(168, 122, 111, 0.7);
    }

    /* Modal container styling */
    .modal-container {
      max-width: 1200px;
      margin: auto;
      background: linear-gradient(145deg, var(--color-bg-gradient-start), var(--color-bg-gradient-end));
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 10px var(--color-shadow);
    }

    .modal-container h2 {
      color: var(--color-base);
      text-shadow: 0 0 5px var(--color-shadow);
    }

    .modal-actions {
      text-align: center;
      margin-top: 30px;
    }

    .modal-actions .submit-btn {
      margin: 0 10px;
      display: inline-block;
      width: auto;
      padding: 12px 24px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <img src="images/img_roshani_logo_1.png" alt="Roshani Logo" class="logo">
    <div class="search-bar">
      <input type="text" placeholder="Search here...">
      <img src="images/img_search.svg" alt="Search" class="search-icon">
    </div>
    <div class="user-cart">
      <button class="user-btn">
        <img src="images/img_user.svg" alt="User Account" class="user-icon" />
        <a href="dashboard.html"> <span>▼ User-name</span></a>
      </button>
      <a href="cart.html"> <img src="images/img_shopping_cart.svg" alt="Shopping Cart" class="cart-icon" /></a>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav-bar">
    <div class="nav-links">
      <a href="home.html" class="nav-link">Home</a>
      <a href="explore.html" class="nav-link active">Explore ▼</a>
      <a href="upload.html" class="nav-link">Upload</a>
      <a href="mydesign.html" class="nav-link">Mydesign</a>
      <a href="#" class="nav-link">Contact</a>
    </div>
  </nav>

  <!-- Back Button -->
  <div class="back-button" onclick="history.back()">
    <img src="images/img_arrow_left.svg" alt="Back Arrow">
    <span>GO BACK</span>
  </div>

  <div class="container">
    <!-- Form Section Part 1 -->
    <div class="form-section form-part">
      <h2>Upload Your Design</h2>

      <input type="file" id="designFile" accept="image/*" style="display: none;">
      <div class="file-upload-box" onclick="document.getElementById('designFile').click()">
        <div class="upload-icon">📤</div>
        <span>Upload your Design here</span>
      </div>

      <label class="label">Category</label>
      <select id="fileCategory">
        <option value="">Select Category</option>
        <option value="Logo Design">Logo Design</option>
        <option value="Poster Design">Poster Design</option>
        <option value="Banner Design">Banner Design</option>
        <option value="Web UI">Web UI</option>
      </select>
    </div>

    <!-- Form Section Part 2 -->
    <div class="form-section form-part">
      <label class="label">Design Name</label>
      <input type="text" id="fileName" placeholder="Enter design name">

      <label class="label">Description</label>
      <textarea id="description" rows="4" placeholder="Write something about your design..."></textarea>

      <label class="label">Price (in ₹)</label>
      <input type="number" id="price" placeholder="Enter price">

      <button class="submit-btn" onclick="saveDesign()" style="margin-right: 2%;">Submit Design</button>
      <button class="submit-btn" style="background: linear-gradient(135deg, #e74c3c, #c0392b); margin-top: 10px;" onclick="showSavedDesigns()">View Saved Designs</button>
    </div>

    <!-- Preview Section -->
    <div class="preview-section">
      <h2>Live Preview</h2>
      <div class="preview-box" id="previewBox">
        <h3 id="previewName">Design Name Here</h3>
        <div class="preview-texts">
          <p><strong>Category:</strong> <span id="previewCategory">--</span></p>
          <p><strong>Description:</strong> <span id="previewDescription">--</span></p>
          <p><strong>Price:</strong> ₹<span id="previewPrice">0</span></p>
        </div>
        <img id="previewImage" class="preview-img" src="" alt="Design Preview">
      </div>
    </div>
  </div>

  <!-- Saved Designs Modal - Updated to match lavender theme -->
  <div id="savedDesignsModal">
    <button class="back-btn" onclick="closeSavedDesigns()">← Back to Upload</button>

    <div class="modal-container">
      <h2>Saved Designs</h2>
      <div id="savedGallery"></div>
      <div class="modal-actions">
        <button class="submit-btn" style="background: linear-gradient(135deg, #e74c3c, #c0392b);" onclick="clearAllSaved()">Delete All</button>
        <button class="submit-btn" style="background: linear-gradient(135deg, #1abc9c, #16a085); margin-left: 20px;" onclick="closeSavedDesigns()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Get all input elements
    const nameInput = document.getElementById('fileName');
    const categoryInput = document.getElementById('fileCategory');
    const descriptionInput = document.getElementById('description');
    const priceInput = document.getElementById('price');
    const fileInput = document.getElementById('designFile');
    const fileUploadBox = document.querySelector('.file-upload-box');

    // Get all preview elements
    const previewName = document.getElementById('previewName');
    const previewCategory = document.getElementById('previewCategory');
    const previewDescription = document.getElementById('previewDescription');
    const previewPrice = document.getElementById('previewPrice');
    const previewImage = document.getElementById('previewImage');

    // Update preview when name changes
    nameInput.addEventListener('input', updatePreview);
    
    // Update preview when category changes
    categoryInput.addEventListener('change', updatePreview);
    
    // Update preview when description changes
    descriptionInput.addEventListener('input', updatePreview);
    
    // Update preview when price changes
    priceInput.addEventListener('input', updatePreview);
    
    // Handle file upload and update preview
    fileInput.addEventListener('change', handleFileUpload);

    // Function to update all preview elements
    function updatePreview() {
      previewName.textContent = nameInput.value.trim() || "Design Name Here";
      previewCategory.textContent = categoryInput.value || "--";
      previewDescription.textContent = descriptionInput.value.trim() || "--";
      previewPrice.textContent = priceInput.value || "0";
    }

    // Function to handle file upload and display preview
    function handleFileUpload() {
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImage.src = e.target.result;
          previewImage.style.display = 'block';
          
          // Update the upload box background with the image
          fileUploadBox.style.backgroundImage = `url(${e.target.result})`;
          fileUploadBox.innerHTML = ''; // Clear the upload icon and text
        };
        reader.readAsDataURL(file);
      } else {
        previewImage.src = "";
        previewImage.style.display = 'none';
        fileUploadBox.style.backgroundImage = '';
        fileUploadBox.innerHTML = `
          <div class="upload-icon">📤</div>
          <span>Upload your Design here</span>
        `;
      }
    }

    function saveDesign() {
      if (!nameInput.value.trim()) {
        alert("Please enter the design name.");
        nameInput.focus();
        return;
      }
      if (!categoryInput.value) {
        alert("Please select a category.");
        categoryInput.focus();
        return;
      }
      if (!previewImage.src || previewImage.style.display === 'none') {
        alert("Please upload an image for the design.");
        fileInput.focus();
        return;
      }
      const design = {
        name: nameInput.value.trim(),
        category: categoryInput.value,
        description: descriptionInput.value.trim(),
        price: priceInput.value || "0",
        image: previewImage.src
      };
      const savedDesigns = JSON.parse(localStorage.getItem("savedDesigns") || "[]");
      savedDesigns.push(design);
      localStorage.setItem("savedDesigns", JSON.stringify(savedDesigns));
      alert("Design saved successfully!");
      resetForm();
    }

    function resetForm() {
      nameInput.value = "";
      categoryInput.value = "";
      descriptionInput.value = "";
      priceInput.value = "";
      fileInput.value = "";
      previewName.textContent = "Design Name Here";
      previewCategory.textContent = "--";
      previewDescription.textContent = "--";
      previewPrice.textContent = "0";
      previewImage.src = "";
      previewImage.style.display = "none";
      fileUploadBox.style.backgroundImage = '';
      fileUploadBox.innerHTML = `
        <div class="upload-icon">📤</div>
        <span>Upload your Design here</span>
      `;
    }

    function showSavedDesigns() {
      const gallery = document.getElementById("savedGallery");
      gallery.innerHTML = "";

      const saved = JSON.parse(localStorage.getItem("savedDesigns") || "[]");
      if (saved.length === 0) {
        gallery.innerHTML = "<p style='color: #ebdfd7; text-align: center; font-weight: 600;'>No saved designs yet.</p>";
      }

      saved.forEach((design, index) => {
        const card = document.createElement("div");
        card.className = "saved-card";
        card.innerHTML = `
          <img src="${design.image}" alt="${design.name}" />
          <h3>${design.name}</h3>
          <p><strong>Category:</strong> ${design.category}</p>
          <p><strong>Description:</strong> ${design.description || '--'}</p>
          <p><strong>Price:</strong> ₹${design.price}</p>
          <button class="delete-btn" onclick="deleteDesign(${index})">Delete</button>
        `;
        gallery.appendChild(card);
      });

      document.getElementById("savedDesignsModal").style.display = "block";
      document.getElementById("savedDesignsModal").scrollTop = 0;
    }

    function closeSavedDesigns() {
      document.getElementById("savedDesignsModal").style.display = "none";
    }

    function clearAllSaved() {
      if (confirm("Are you sure you want to delete all saved designs?")) {
        localStorage.removeItem("savedDesigns");
        showSavedDesigns();
      }
    }

    function deleteDesign(index) {
      const saved = JSON.parse(localStorage.getItem("savedDesigns") || "[]");
      saved.splice(index, 1);
      localStorage.setItem("savedDesigns", JSON.stringify(saved));
      showSavedDesigns();
    }

    // Initialize the preview
    updatePreview();
  </script>

</body>
</html>
